"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[887],{9887:function(t,e,a){a.r(e),a.d(e,{default:function(){return E}});var s=a(6768),n=a(4232);const r={class:"container py-5"},d={key:0,class:"text-center my-5"},l={key:1},i={key:0,class:"card shadow p-4 mb-4"},c={key:1,class:"card shadow p-4 mb-4"},u={class:"d-flex align-items-center"},o={class:"text-muted mt-2 d-block"},p={class:"card shadow p-4"},h={class:"d-flex justify-content-between align-items-center mb-3"},m={class:"text-muted"},k={key:0,class:"spinner-border spinner-border-sm text-primary ms-2"},y={key:0,class:"table table-striped mt-3"},L={key:1,class:"text-muted text-center mt-3"};function b(t,e,a,b,v,f){return(0,s.uX)(),(0,s.CE)("div",r,[e[10]||(e[10]=(0,s.Lk)("h3",{class:"text-center mb-4"},"Candidate Dashboard",-1)),v.loading?((0,s.uX)(),(0,s.CE)("div",d,[...e[0]||(e[0]=[(0,s.Lk)("div",{class:"spinner-border text-primary",role:"status"},null,-1),(0,s.Lk)("p",null,"Loading dashboard...",-1)])])):((0,s.uX)(),(0,s.CE)("div",l,[v.candidate?((0,s.uX)(),(0,s.CE)("div",i,[e[5]||(e[5]=(0,s.Lk)("h5",{class:"mb-3 text-primary"},"Candidate Info",-1)),(0,s.Lk)("p",null,[e[1]||(e[1]=(0,s.Lk)("strong",null,"Name:",-1)),(0,s.eW)(" "+(0,n.v_)(v.candidate.first_name)+" "+(0,n.v_)(v.candidate.surname),1)]),(0,s.Lk)("p",null,[e[2]||(e[2]=(0,s.Lk)("strong",null,"Gender:",-1)),(0,s.eW)(" "+(0,n.v_)(v.candidate.gender),1)]),(0,s.Lk)("p",null,[e[3]||(e[3]=(0,s.Lk)("strong",null,"Email:",-1)),(0,s.eW)(" "+(0,n.v_)(v.candidate.email),1)]),(0,s.Lk)("p",null,[e[4]||(e[4]=(0,s.Lk)("strong",null,"Phone:",-1)),(0,s.eW)(" "+(0,n.v_)(v.candidate.phone_country_code)+" "+(0,n.v_)(v.candidate.phone_number),1)])])):(0,s.Q3)("",!0),v.candidate?((0,s.uX)(),(0,s.CE)("div",c,[e[6]||(e[6]=(0,s.Lk)("h5",{class:"mb-3 text-primary"},"Application Status",-1)),(0,s.Lk)("div",u,[(0,s.Lk)("span",{class:(0,n.C4)([f.statusBadgeClass(v.candidate.status),"badge fs-6 px-3 py-2"])},(0,n.v_)(v.candidate.status),3)]),(0,s.Lk)("small",o,(0,n.v_)(v.statusDescription[v.candidate.status]||"Your application status will be updated after review."),1)])):(0,s.Q3)("",!0),(0,s.Lk)("div",p,[(0,s.Lk)("div",h,[e[8]||(e[8]=(0,s.Lk)("h5",{class:"text-primary"},"Payment History",-1)),(0,s.Lk)("small",m,[e[7]||(e[7]=(0,s.eW)(" Auto-refreshes every 30s ",-1)),v.loading?((0,s.uX)(),(0,s.CE)("span",k)):(0,s.Q3)("",!0)])]),v.payments.length?((0,s.uX)(),(0,s.CE)("table",y,[e[9]||(e[9]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Reference"),(0,s.Lk)("th",null,"Amount"),(0,s.Lk)("th",null,"Status"),(0,s.Lk)("th",null,"Date")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.payments,t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.id},[(0,s.Lk)("td",null,(0,n.v_)(t.reference),1),(0,s.Lk)("td",null,"â‚¦"+(0,n.v_)(t.amount.toLocaleString()),1),(0,s.Lk)("td",null,[(0,s.Lk)("span",{class:(0,n.C4)(f.statusClass(t.status))},(0,n.v_)(t.status),3)]),(0,s.Lk)("td",null,(0,n.v_)(new Date(t.created_at).toLocaleString()),1)]))),128))])])):((0,s.uX)(),(0,s.CE)("p",L," No payments recorded yet. "))])]))])}var v=a(4373),f={name:"CandidateDashboard",props:{candidateId:{type:String,required:!0}},data(){return{loading:!0,candidate:null,payments:[],refreshInterval:null,statusDescription:{PAID:"Payment received. Your application is under review.",ACCEPTED:"ðŸŽ‰ Congratulations! You have been accepted into KPFA.",REJECTED:"Unfortunately, your application was not successful.",NOT_PAID:"Please complete your registration payment."}}},methods:{statusClass(t){return{"text-success fw-bold":"SUCCESS"===t,"text-warning fw-bold":"PENDING"===t,"text-danger fw-bold":"FAILED"===t}},statusBadgeClass(t){return{"bg-success text-white":"ACCEPTED"===t||"PAID"===t,"bg-warning text-dark":"PENDING"===t||"UNDER_REVIEW"===t,"bg-danger text-white":"REJECTED"===t||"FAILED"===t,"bg-secondary text-white":"NOT_PAID"===t}},async fetchDashboard(){try{const[t,e]=await Promise.all([v.A.get(`http://127.0.0.1:8000/api/candidates/${this.candidateId}/`),v.A.get(`http://127.0.0.1:8000/api/payments/candidate/payments/?candidate=${this.candidateId}`)]);this.candidate=t.data,this.payments=Array.isArray(e.data)?e.data:e.data.results||[]}catch(t){console.error("Error loading dashboard:",t)}finally{this.loading=!1}}},mounted(){this.fetchDashboard(),this.refreshInterval=setInterval(()=>{this.fetchDashboard()},3e4)},beforeUnmount(){this.refreshInterval&&clearInterval(this.refreshInterval)}},g=a(1241);const C=(0,g.A)(f,[["render",b],["__scopeId","data-v-5151a619"]]);var E=C}}]);
//# sourceMappingURL=887.ad6040b0.js.map