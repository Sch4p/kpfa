{"version":3,"file":"js/545.cecaca71.js","mappings":"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","sources":["webpack://frontend/./src/views/Checkout.vue","webpack://frontend/./src/views/Checkout.vue?6c79"],"sourcesContent":["<!-- src/views/Checkout.vue -->\r\n<template>\r\n  <div class=\"container py-5\">\r\n    <h2 class=\"fw-bold text-danger mb-4\">Checkout</h2>\r\n\r\n    <!-- Auth Loading -->\r\n    <div v-if=\"isLoadingAuth\" class=\"text-center py-5\">\r\n      <div class=\"spinner-border text-danger\" role=\"status\"></div>\r\n      <p class=\"mt-3 text-muted\">Checking authentication...</p>\r\n    </div>\r\n\r\n    <!-- Authentication Check -->\r\n    <div v-else-if=\"!isAuthenticated\" class=\"alert alert-warning\">\r\n      Please\r\n      <router-link\r\n        :to=\"{ path: '/fan-auth', query: { redirect: $route.fullPath } }\"\r\n        class=\"ms-1 text-primary\"\r\n      >\r\n        log in\r\n      </router-link>\r\n      to complete your purchase.\r\n    </div>\r\n\r\n    <!-- Empty Cart -->\r\n    <div v-else-if=\"!cartItems.length\" class=\"text-center py-5\">\r\n      <p class=\"lead text-muted\">\r\n        Your cart is empty. Please add items before checkout.\r\n      </p>\r\n      <router-link to=\"/eshop\" class=\"btn btn-danger\">\r\n        Back to Shop\r\n      </router-link>\r\n    </div>\r\n\r\n    <!-- Checkout Form -->\r\n    <form v-else @submit.prevent=\"submitOrder\" novalidate>\r\n      <div class=\"row g-4\">\r\n        <!-- Shipping & Payment -->\r\n        <div class=\"col-md-7\">\r\n          <div class=\"card p-4 shadow-sm border-0\">\r\n            <h5 class=\"fw-bold mb-3 text-secondary\">Shipping Details</h5>\r\n\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\">Full Name *</label>\r\n              <input v-model.trim=\"form.full_name\" type=\"text\" class=\"form-control\" required />\r\n              <div v-if=\"errors.full_name\" class=\"form-text text-danger\">{{ errors.full_name }}</div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\">Phone Number *</label>\r\n              <input\r\n                v-model.trim=\"form.phone\"\r\n                type=\"tel\"\r\n                class=\"form-control\"\r\n                placeholder=\"+2348012345678\"\r\n                required\r\n              />\r\n              <div v-if=\"errors.phone\" class=\"form-text text-danger\">{{ errors.phone }}</div>\r\n              <small class=\"text-muted\">\r\n                Accepts international formats (e.g. +234, +233, +229, +225, +227, +228).\r\n              </small>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\">Email *</label>\r\n              <input v-model.trim=\"form.email\" type=\"email\" class=\"form-control\" required />\r\n              <div v-if=\"errors.email\" class=\"form-text text-danger\">{{ errors.email }}</div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\">Shipping Address *</label>\r\n              <textarea v-model.trim=\"form.shipping_address\" class=\"form-control\" rows=\"3\" required></textarea>\r\n              <div v-if=\"errors.shipping_address\" class=\"form-text text-danger\">\r\n                {{ errors.shipping_address }}\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label fw-semibold\">Payment Method *</label>\r\n              <select v-model=\"form.payment_method\" class=\"form-select\" required>\r\n                <option value=\"\">Select Payment Method</option>\r\n                <option value=\"BANK_TRANSFER\">Bank Transfer / Opay</option>\r\n                <option value=\"MONIEPOINT\" disabled>Moniepoint</option>\r\n                <option value=\"MOMOGH\" disabled>MTN Mobile Money Ghana</option>\r\n                <option value=\"COD\">Cash on Delivery</option>\r\n              </select>\r\n              <div v-if=\"errors.payment_method\" class=\"form-text text-danger\">\r\n                {{ errors.payment_method }}\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Bank Transfer Proof Upload -->\r\n            <div v-if=\"form.payment_method === 'BANK_TRANSFER'\" class=\"mt-3\">\r\n              <label class=\"form-label fw-semibold\">Upload Proof of Payment *</label>\r\n              <input\r\n                ref=\"fileInput\"\r\n                type=\"file\"\r\n                @change=\"handleFileUpload\"\r\n                class=\"form-control\"\r\n                accept=\".jpg,.jpeg,.png,.pdf\"\r\n              />\r\n              <small class=\"text-muted\">\r\n                Max size: 2MB. Allowed formats: JPG, PNG, PDF.\r\n              </small>\r\n              <div v-if=\"fileError\" class=\"text-danger small mt-1\">{{ fileError }}</div>\r\n            </div>\r\n\r\n            <div class=\"mt-3\">\r\n              <label class=\"form-label\">Notes (optional)</label>\r\n              <textarea v-model.trim=\"form.notes\" class=\"form-control\" rows=\"2\"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Order Summary -->\r\n        <div class=\"col-md-5\">\r\n          <div class=\"card p-4 shadow-sm border-0\">\r\n            <h5 class=\"fw-bold mb-3 text-secondary\">Order Summary</h5>\r\n\r\n            <ul class=\"list-group list-group-flush mb-3\">\r\n              <li\r\n                v-for=\"item in cartItems\"\r\n                :key=\"item.id\"\r\n                class=\"list-group-item d-flex justify-content-between align-items-center\"\r\n              >\r\n                <div class=\"d-flex align-items-center\">\r\n                  <img\r\n                    v-if=\"item.image\"\r\n                    :src=\"imageUrl(item.image)\"\r\n                    alt=\"\"\r\n                    style=\"width:48px;height:48px;object-fit:cover;border-radius:6px;margin-right:.75rem\"\r\n                  />\r\n                  <div>\r\n                    <strong class=\"d-block small\">{{ item.name }}</strong>\r\n                    <small class=\"text-muted\">x{{ item.qty }}</small>\r\n                  </div>\r\n                </div>\r\n                <span>‚Ç¶{{ formatPrice(item.price * item.qty) }}</span>\r\n              </li>\r\n            </ul>\r\n\r\n            <div class=\"d-flex justify-content-between fw-bold border-top pt-3\">\r\n              <span>Total:</span>\r\n              <span>‚Ç¶{{ formatPrice(cartSubtotal) }}</span>\r\n            </div>\r\n\r\n            <div v-if=\"form.payment_method === 'BANK_TRANSFER'\" class=\"mt-3\">\r\n              <div class=\"alert alert-info small\">\r\n                Please complete the transfer to our designated provider (Opay/Moniepoint/Bank).\r\n                Upload the receipt above.\r\n                <div class=\"mt-2\">\r\n                  <strong>Note:</strong> Payment instructions will be sent to your email once the\r\n                  order is created.\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-danger w-100 mt-4\" :disabled=\"loading\">\r\n              <span\r\n                v-if=\"loading\"\r\n                class=\"spinner-border spinner-border-sm me-2\"\r\n                role=\"status\"\r\n                aria-hidden=\"true\"\r\n              ></span>\r\n              {{ loading ? \"Processing...\" : \"Place Order\" }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div v-if=\"successMessage\" class=\"alert alert-success mt-4\">{{ successMessage }}</div>\r\n    <div v-if=\"submitError\" class=\"alert alert-danger mt-4\">{{ submitError }}</div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n \r\nexport default {\r\n  /* eslint-disable vue/multi-word-component-names */\r\n  name: \"Checkout\",\r\n  data() {\r\n    return {\r\n      isLoadingAuth: true,\r\n      token: null,\r\n      cartItems: [],\r\n      form: {\r\n        full_name: \"\",\r\n        phone: \"\", \r\n        email: \"\",\r\n        shipping_address: \"\",\r\n        payment_method: \"\",\r\n        notes: \"\",\r\n      },\r\n      paymentProofFile: null,\r\n      fileError: \"\",\r\n      loading: false,\r\n      submitError: \"\",\r\n      successMessage: \"\",\r\n      errors: {},\r\n    };\r\n  },\r\n  computed: {\r\n    isAuthenticated() {\r\n      return !!this.token;\r\n    },\r\n    cartSubtotal() {\r\n      return this.cartItems.reduce(\r\n        (s, i) => s + (Number(i.price || 0) * Number(i.qty || 0)),\r\n        0\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    /**\r\n     * checkAuthStatus:\r\n     * - Reads token from localStorage\r\n     * - Sets axios default Authorization header (optional but helpful)\r\n     * - Marks auth loading complete\r\n     */\r\n    checkAuthStatus() {\r\n      //this.token = localStorage.getItem(\"authToken\") || null;\r\n      this.token = localStorage.getItem(\"token\") || null;\r\n\r\n      // If a token exists, set default axios header to avoid adding it everywhere.\r\n      // (You can remove this if you prefer adding header per-request.)\r\n      if (this.token) {\r\n        axios.defaults.headers.common[\"Authorization\"] = `Token ${this.token}`;\r\n      } else {\r\n        delete axios.defaults.headers.common[\"Authorization\"];\r\n      }\r\n\r\n      this.isLoadingAuth = false;\r\n    },\r\n\r\n    loadCart() {\r\n      try {\r\n        const raw = localStorage.getItem(\"kpfa_cart\");\r\n        this.cartItems = raw ? JSON.parse(raw) : [];\r\n      } catch {\r\n        this.cartItems = [];\r\n      }\r\n    },\r\n\r\n    validateForm() {\r\n      this.errors = {};\r\n      if (!this.form.full_name) this.errors.full_name = \"Full name is required.\";\r\n      if (!this.form.phone) this.errors.phone = \"Phone is required.\";\r\n      if (!this.form.email) this.errors.email = \"Email is required.\";\r\n      if (!this.form.shipping_address)\r\n        this.errors.shipping_address = \"Shipping address is required.\";\r\n      if (!this.form.payment_method)\r\n        this.errors.payment_method = \"Please select a payment method.\";\r\n      if (this.form.payment_method === \"BANK_TRANSFER\" && !this.paymentProofFile)\r\n        this.errors.payment_proof = \"Payment proof required.\";\r\n      return Object.keys(this.errors).length === 0;\r\n    },\r\n\r\n    handleFileUpload(e) {\r\n      this.fileError = \"\";\r\n      const f = e.target.files[0];\r\n      if (!f) return;\r\n      const allowed = [\"image/jpeg\", \"image/jpg\", \"image/png\", \"application/pdf\"];\r\n      if (!allowed.includes(f.type)) {\r\n        this.fileError = \"Invalid file type. Please upload JPG, PNG or PDF.\";\r\n        if (this.$refs.fileInput) this.$refs.fileInput.value = \"\";\r\n        return;\r\n      }\r\n      if (f.size > 2 * 1024 * 1024) {\r\n        this.fileError = \"File too large. Max size 2 MB.\";\r\n        if (this.$refs.fileInput) this.$refs.fileInput.value = \"\";\r\n        return;\r\n      }\r\n      this.paymentProofFile = f;\r\n    },\r\n\r\n    imageUrl(src) {\r\n      if (!src) return \"\";\r\n      if (src.startsWith(\"http\")) return src;\r\n      return `${window.location.origin}/${src}`;\r\n    },\r\n\r\n    formatPrice(v) {\r\n      return Number(v).toLocaleString(undefined, {\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2,\r\n      });\r\n    },\r\n\r\nasync submitOrder() {\r\n  if (this.loading) return;\r\n\r\n  // ‚úÖ Retrieve token freshly from localStorage\r\n  const token = localStorage.getItem(\"token\");\r\n  if (!token) {\r\n    alert(\"Please log in before placing an order.\");\r\n    this.$router.push({ name: \"Login\" });\r\n    return;\r\n  }\r\n\r\n  // ‚úÖ Build payload correctly from `form`\r\n  const payload = {\r\n    full_name: this.form.full_name,\r\n    phone: this.form.phone,\r\n    email: this.form.email,\r\n    shipping_address: this.form.shipping_address,\r\n    payment_method: this.form.payment_method,\r\n    notes: this.form.notes,\r\n    order_items: this.cartItems.map((item) => ({\r\n      item: item.id,\r\n      quantity: item.qty,\r\n    })),\r\n  };\r\n\r\n  try {\r\n    this.loading = true;\r\n\r\n   \r\n    console.log(\"üõ∞Ô∏è Order payload being sent:\", payload);\r\n    const res = await axios.post(\r\n      \"http://127.0.0.1:8000/api/orders/\",\r\n      payload,\r\n      {\r\n        headers: {\r\n          Authorization: `Token ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n   \r\n\r\n    console.log(\"‚úÖ Order response:\", res.data);\r\n    alert(\"üéâ Order placed successfully!\");\r\n\r\n    // ‚úÖ Clear cart properly\r\n    this.cartItems = [];\r\n    localStorage.removeItem(\"kpfa_cart\");\r\n\r\n    \r\n    \r\n    this.successMessage = \"Your order has been placed successfully!\"; \r\n     // Redirect to Order Summary page with order ID\r\n  console.log(\"Redirecting to:\", `/order-summary/${res.data.id}`);\r\n  if (res.status === 201) {\r\n    this.$router.push({ name: \"OrderSummary\", params: { id: res.data.id } });\r\n}\r\n   \r\n    \r\n  } catch (error) {\r\n    console.error(\"‚ùå Order error:\", error.res?.data || error.message);\r\n    if (error.res?.status === 401) {\r\n      alert(\"Your session has expired. Please log in again.\");\r\n      this.$router.push({ name: \"Login\" });\r\n    } else {\r\n      alert(\"Failed to place order. Please try again.\");\r\n    }\r\n  } finally {\r\n    this.loading = false;\r\n  }\r\n}\r\n\r\n\r\n\r\n  },\r\n\r\n\r\n  mounted() {\r\n    // Load cart immediately (UI can show empty cart quickly if no items)\r\n    this.loadCart();\r\n\r\n    // Start by checking auth (this will set isLoadingAuth = false when done)\r\n    this.checkAuthStatus();\r\n\r\n    // Listen for storage changes coming from other tabs / login page.\r\n    // Some login implementations set localStorage then redirect back to same tab,\r\n    // while others open a new tab ‚Äî this covers both.\r\n    window.addEventListener(\"storage\", this.checkAuthStatus);\r\n  },\r\n\r\n  beforeUnmount() {\r\n    window.removeEventListener(\"storage\", this.checkAuthStatus);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card {\r\n  border-radius: 0.6rem;\r\n}\r\n.btn-danger {\r\n  background-color: #b30000;\r\n  border-color: #b30000;\r\n}\r\n.btn-danger:hover {\r\n  background-color: #8f0000;\r\n  border-color: #8f0000;\r\n}\r\n.list-group-item img {\r\n  border: 1px solid rgba(0, 0, 0, 0.06);\r\n}\r\n.form-text.text-danger {\r\n  margin-top: 0.25rem;\r\n}\r\n@media (max-width: 768px) {\r\n  .card {\r\n    padding: 1rem;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Checkout.vue?vue&type=template&id=43318f5a&scoped=true\"\nimport script from \"./Checkout.vue?vue&type=script&lang=js\"\nexport * from \"./Checkout.vue?vue&type=script&lang=js\"\n\nimport \"./Checkout.vue?vue&type=style&index=0&id=43318f5a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-43318f5a\"]])\n\nexport default __exports__"],"names":["class","role","_createElementBlock","_hoisted_1","_createElementVNode","$data","isLoadingAuth","_hoisted_2","_cache","$options","isAuthenticated","cartItems","length","onSubmit","_withModifiers","args","submitOrder","novalidate","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","form","full_name","$event","type","required","trim","errors","_hoisted_9","_toDisplayString","_hoisted_10","phone","placeholder","_hoisted_11","_hoisted_12","email","_hoisted_13","_hoisted_14","shipping_address","rows","_hoisted_15","_hoisted_16","payment_method","_hoisted_17","_hoisted_18","ref","onChange","handleFileUpload","accept","fileError","_hoisted_19","_hoisted_20","notes","_hoisted_21","_hoisted_22","_hoisted_23","_Fragment","_renderList","item","key","id","_hoisted_24","image","src","imageUrl","alt","style","_hoisted_26","name","_hoisted_27","qty","formatPrice","price","_hoisted_28","cartSubtotal","_hoisted_29","disabled","loading","_hoisted_31","_hoisted_4","_createVNode","_component_router_link","to","_hoisted_3","path","query","redirect","_ctx","$route","fullPath","successMessage","_hoisted_32","submitError","_hoisted_33","data","token","paymentProofFile","computed","this","reduce","s","i","Number","methods","checkAuthStatus","localStorage","getItem","axios","defaults","headers","common","loadCart","raw","JSON","parse","validateForm","payment_proof","Object","keys","e","f","target","files","allowed","includes","size","$refs","fileInput","value","startsWith","window","location","origin","v","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","alert","$router","push","payload","order_items","map","quantity","console","log","res","post","Authorization","removeItem","status","params","error","message","mounted","addEventListener","beforeUnmount","removeEventListener","__exports__","render"],"sourceRoot":""}