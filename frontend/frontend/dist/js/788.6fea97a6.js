"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[788],{9788:function(t,e,a){a.r(e),a.d(e,{default:function(){return M}});var s=a(6768),i=a(4232),l=a(5130);const r={class:"container py-4"},n={class:"d-flex justify-content-between align-items-center mb-4"},o={class:"fw-bold mb-0 text-danger"},c={class:"text-muted"},d={key:0,class:"badge bg-danger ms-2"},u={class:"row mb-3 gx-3 gy-3"},p={class:"col-md-3"},g={class:"card p-3 shadow-sm border-0"},k={class:"form-label fw-semibold"},m={class:"form-label fw-semibold"},h={class:"input-group mb-3"},b=["disabled"],y={class:"text-end"},C={class:"col-md-9"},v={key:0,class:"text-center py-5","aria-busy":"true"},f={key:1,class:"row g-3"},L=["aria-labelledby"],_=["src","alt"],x={key:1,class:"shop-img bg-light d-flex align-items-center justify-content-center"},P={class:"card-body d-flex flex-column"},w=["id"],E={class:"card-text text-muted small text-truncate"},X={class:"d-flex justify-content-between align-items-center mt-auto"},q={class:"price-badge"},F={key:0,class:"small text-muted mt-1"},$={key:0},S={key:1,class:"text-danger"},A={class:"btn-group",role:"group","aria-label":"Product actions"},I=["onClick","disabled"],N={key:1,class:"input-group input-group-sm w-auto"},j=["onClick"],K=["value"],Q=["onClick"],W={key:1,class:"col-12 text-center py-5"},D={key:2,class:"mt-4","aria-label":"Product pagination"},O={class:"pagination justify-content-center"},U=["onClick"];function J(t,e,a,J,V,T){const z=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",n,[(0,s.Lk)("div",null,[(0,s.Lk)("h1",o,(0,i.v_)(t.$t("eshop.heading")),1),(0,s.Lk)("small",c,(0,i.v_)(t.$t("eshop.subhead")),1)]),(0,s.Lk)("div",null,[(0,s.bF)(z,{to:"/cart",class:"btn btn-outline-dark","aria-label":"View cart"},{default:(0,s.k6)(()=>[(0,s.eW)(" ðŸ›’ "+(0,i.v_)(t.$t("eshop.cart"))+" ",1),V.cart.length?((0,s.uX)(),(0,s.CE)("span",d,(0,i.v_)(V.cart.length),1)):(0,s.Q3)("",!0)]),_:1})])]),(0,s.Lk)("div",u,[(0,s.Lk)("aside",p,[(0,s.Lk)("div",g,[(0,s.Lk)("label",k,(0,i.v_)(t.$t("eshop.category")),1),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>V.category=t),onChange:e[1]||(e[1]=(...t)=>T.loadProducts&&T.loadProducts(...t)),class:"form-select mb-3","aria-label":"Filter by category"},[e[9]||(e[9]=(0,s.Lk)("option",{value:""},"All",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(V.categories,t=>((0,s.uX)(),(0,s.CE)("option",{key:t},(0,i.v_)(t),1))),128))],544),[[l.u1,V.category]]),(0,s.Lk)("label",m,(0,i.v_)(t.$t("eshop.search")),1),(0,s.Lk)("div",h,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>V.q=t),onKeyup:e[3]||(e[3]=(0,l.jR)((...t)=>T.loadProducts&&T.loadProducts(...t),["enter"])),placeholder:"Search items...",class:"form-control"},null,544),[[l.Jo,V.q]]),(0,s.Lk)("button",{class:"btn btn-danger",onClick:e[4]||(e[4]=(...t)=>T.loadProducts&&T.loadProducts(...t)),disabled:V.loading},(0,i.v_)(t.$t("eshop.go")),9,b)]),(0,s.Lk)("div",y,[(0,s.Lk)("button",{class:"btn btn-link text-secondary p-0",onClick:e[5]||(e[5]=(...t)=>T.resetFilters&&T.resetFilters(...t))},(0,i.v_)(t.$t("eshop.reset")),1)])])]),(0,s.Lk)("section",C,[V.loading?((0,s.uX)(),(0,s.CE)("div",v,[...e[10]||(e[10]=[(0,s.Lk)("div",{class:"spinner-border text-danger",role:"status","aria-hidden":"true"},null,-1),(0,s.Lk)("p",{class:"mt-3"},"Loading products...",-1)])])):((0,s.uX)(),(0,s.CE)("div",f,[V.products.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(V.products,a=>((0,s.uX)(),(0,s.CE)("div",{key:a.id,class:"col-sm-6 col-md-4"},[(0,s.Lk)("article",{class:"card shop-card h-100 border-0","aria-labelledby":"title-"+a.id},[a.image?((0,s.uX)(),(0,s.CE)("img",{key:0,src:T.imageUrl(a.image),class:"shop-img",alt:a.name,loading:"lazy"},null,8,_)):((0,s.uX)(),(0,s.CE)("div",x,[...e[11]||(e[11]=[(0,s.Lk)("small",{class:"text-muted"},"No image",-1)])])),(0,s.Lk)("div",P,[(0,s.Lk)("h5",{id:"title-"+a.id,class:"card-title"},(0,i.v_)(a.name),9,w),(0,s.Lk)("p",E,(0,i.v_)(a.description),1),(0,s.Lk)("div",X,[(0,s.Lk)("div",null,[(0,s.Lk)("span",q,"â‚¦"+(0,i.v_)(T.formatPrice(a.price)),1),void 0!==a.stock_quantity?((0,s.uX)(),(0,s.CE)("div",F,[a.stock_quantity>0?((0,s.uX)(),(0,s.CE)("span",$,(0,i.v_)(a.stock_quantity)+" in stock",1)):((0,s.uX)(),(0,s.CE)("span",S,"Out of stock"))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",A,[(0,s.bF)(z,{to:{name:"ProductDetail",params:{id:a.id}},class:"btn btn-sm btn-outline-primary"},{default:(0,s.k6)(()=>[(0,s.eW)((0,i.v_)(t.$t("buttons.view")),1)]),_:1},8,["to"]),T.inCart(a.id)?((0,s.uX)(),(0,s.CE)("div",N,[(0,s.Lk)("button",{class:"btn btn-outline-danger",onClick:t=>T.decrementCart(a)},"-",8,j),(0,s.Lk)("input",{type:"text",readonly:"",class:"form-control text-center",style:{"max-width":"40px"},value:T.getCartQuantity(a.id)},null,8,K),(0,s.Lk)("button",{class:"btn btn-outline-success",onClick:t=>T.incrementCart(a)},"+",8,Q)])):((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-sm btn-danger",onClick:t=>T.addToCart(a),disabled:a.stock_quantity<=0},(0,i.v_)(t.$t("buttons.add_to_cart")),9,I))])])])],8,L)]))),128)):((0,s.uX)(),(0,s.CE)("div",W,[e[12]||(e[12]=(0,s.Lk)("p",{class:"text-muted"},"No items found for this selection.",-1)),(0,s.Lk)("button",{class:"btn btn-outline-secondary",onClick:e[6]||(e[6]=(...t)=>T.resetFilters&&T.resetFilters(...t))},"Clear filters")]))])),V.pageCount>1?((0,s.uX)(),(0,s.CE)("nav",D,[(0,s.Lk)("ul",O,[(0,s.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:1===V.page}])},[(0,s.Lk)("a",{class:"page-link",onClick:e[7]||(e[7]=(0,l.D$)(t=>T.changePage(V.page-1),["prevent"]))},"Prev")],2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(V.pageCount,t=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:(0,i.C4)(["page-item",{active:V.page===t}])},[(0,s.Lk)("a",{class:"page-link",onClick:(0,l.D$)(e=>T.changePage(t),["prevent"])},(0,i.v_)(t),9,U)],2))),128)),(0,s.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:V.page===V.pageCount}])},[(0,s.Lk)("a",{class:"page-link",onClick:e[8]||(e[8]=(0,l.D$)(t=>T.changePage(V.page+1),["prevent"]))},"Next")],2)])])):(0,s.Q3)("",!0)])])])}a(4114),a(8111),a(2489),a(116),a(1701),a(3579),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);var V=a(4373),T={name:"eShop",data(){return{products:[],categories:[],loading:!1,q:"",category:"",page:1,pageCount:1,cart:JSON.parse(localStorage.getItem("kpfa_cart"))||[]}},methods:{async loadProducts(){this.loading=!0;try{const t={search:this.q,category:this.category,page:this.page},e=await V.A.get("http://127.0.0.1:8000/api/shop/",{params:t}),a=e.data.results??e.data;this.products=Array.isArray(a)?a:[],this.pageCount=e.data.page_count??e.data.total_pages??1,this.categories=[...new Set(this.products.map(t=>t.category).filter(Boolean))],document.title="KPFA Shop â€” Official Merchandise"}catch(t){console.error("Error loading products:",t)}finally{this.loading=!1}},resetFilters(){this.q="",this.category="",this.loadProducts()},changePage(t){t<1&&(t=1),this.page=t,this.loadProducts()},imageUrl(t){return t?t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/")?window.location.origin+t:window.location.origin+"/"+t:""},formatPrice(t){try{return Number(t).toFixed(2)}catch{return t}},saveCart(){localStorage.setItem("kpfa_cart",JSON.stringify(this.cart))},inCart(t){return this.cart.some(e=>e.id===t)},getCartQuantity(t){const e=this.cart.find(e=>e.id===t);return e?e.qty:0},addToCart(t){const e=this.cart.find(e=>e.id===t.id);e?e.qty++:this.cart.push({id:t.id,name:t.name,price:t.price,qty:1,image:t.image}),this.saveCart()},incrementCart(t){const e=this.cart.find(e=>e.id===t.id);e&&(e.qty++,this.saveCart())},decrementCart(t){const e=this.cart.find(e=>e.id===t.id);e&&(e.qty--,e.qty<=0&&(this.cart=this.cart.filter(e=>e.id!==t.id)),this.saveCart())}},mounted(){this.loadProducts()}},z=a(1241);const B=(0,z.A)(T,[["render",J],["__scopeId","data-v-6f11fd81"]]);var M=B}}]);
//# sourceMappingURL=788.6fea97a6.js.map