{"version":3,"file":"js/887.ad6040b0.js","mappings":"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","sources":["webpack://frontend/./src/views/CandidateDashboard.vue","webpack://frontend/./src/views/CandidateDashboard.vue?841e"],"sourcesContent":["<template>\r\n  <div class=\"container py-5\">\r\n    <h3 class=\"text-center mb-4\">Candidate Dashboard</h3>\r\n\r\n    <!-- Loading Spinner -->\r\n    <div v-if=\"loading\" class=\"text-center my-5\">\r\n      <div class=\"spinner-border text-primary\" role=\"status\"></div>\r\n      <p>Loading dashboard...</p>\r\n    </div>\r\n\r\n    <!-- Dashboard Content -->\r\n    <div v-else>\r\n      <!-- Candidate Info -->\r\n      <div class=\"card shadow p-4 mb-4\" v-if=\"candidate\">\r\n        <h5 class=\"mb-3 text-primary\">Candidate Info</h5>\r\n        <p><strong>Name:</strong> {{ candidate.first_name }} {{ candidate.surname }}</p>\r\n        <p><strong>Gender:</strong> {{ candidate.gender }}</p>\r\n        <p><strong>Email:</strong> {{ candidate.email }}</p>\r\n        <p><strong>Phone:</strong> {{ candidate.phone_country_code }} {{ candidate.phone_number }}</p>\r\n      </div>\r\n\r\n      <!-- Application Status -->\r\n      <div class=\"card shadow p-4 mb-4\" v-if=\"candidate\">\r\n        <h5 class=\"mb-3 text-primary\">Application Status</h5>\r\n        <div class=\"d-flex align-items-center\">\r\n          <span\r\n            :class=\"statusBadgeClass(candidate.status)\"\r\n            class=\"badge fs-6 px-3 py-2\"\r\n          >\r\n            {{ candidate.status }}\r\n          </span>\r\n        </div>\r\n        <small class=\"text-muted mt-2 d-block\">\r\n          {{\r\n            statusDescription[candidate.status] ||\r\n            \"Your application status will be updated after review.\"\r\n          }}\r\n        </small>\r\n      </div>\r\n\r\n      <!-- Payment History -->\r\n      <div class=\"card shadow p-4\">\r\n        <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h5 class=\"text-primary\">Payment History</h5>\r\n          <small class=\"text-muted\">\r\n            Auto-refreshes every 30s\r\n          <span v-if=\"loading\" class=\"spinner-border spinner-border-sm text-primary ms-2\"></span>\r\n          </small>\r\n        </div>\r\n        <table class=\"table table-striped mt-3\" v-if=\"payments.length\">\r\n          <thead>\r\n            <tr>\r\n              <th>Reference</th>\r\n              <th>Amount</th>\r\n              <th>Status</th>\r\n              <th>Date</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"p in payments\" :key=\"p.id\">\r\n              <td>{{ p.reference }}</td>\r\n              <td>â‚¦{{ p.amount.toLocaleString() }}</td>\r\n              <td>\r\n                <span :class=\"statusClass(p.status)\">{{ p.status }}</span>\r\n              </td>\r\n              <td>{{ new Date(p.created_at).toLocaleString() }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <p v-else class=\"text-muted text-center mt-3\">\r\n          No payments recorded yet.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"CandidateDashboard\",\r\n  props: {\r\n    candidateId: { type: String, required: true },\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      candidate: null,\r\n      payments: [],\r\n      refreshInterval: null, // for polling\r\n      statusDescription: {\r\n        PAID: \"Payment received. Your application is under review.\",\r\n        ACCEPTED: \"ðŸŽ‰ Congratulations! You have been accepted into KPFA.\",\r\n        REJECTED: \"Unfortunately, your application was not successful.\",\r\n        NOT_PAID: \"Please complete your registration payment.\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    statusClass(status) {\r\n      return {\r\n        \"text-success fw-bold\": status === \"SUCCESS\",\r\n        \"text-warning fw-bold\": status === \"PENDING\",\r\n        \"text-danger fw-bold\": status === \"FAILED\",\r\n      };\r\n    },\r\n    statusBadgeClass(status) {\r\n      return {\r\n        \"bg-success text-white\": status === \"ACCEPTED\" || status === \"PAID\",\r\n        \"bg-warning text-dark\": status === \"PENDING\" || status === \"UNDER_REVIEW\",\r\n        \"bg-danger text-white\": status === \"REJECTED\" || status === \"FAILED\",\r\n        \"bg-secondary text-white\": status === \"NOT_PAID\",\r\n      };\r\n    },\r\n    async fetchDashboard() {\r\n      try {\r\n    const [candidateRes, paymentsRes] = await Promise.all([\r\n      axios.get(`http://127.0.0.1:8000/api/candidates/${this.candidateId}/`),\r\n      axios.get(\r\n        `http://127.0.0.1:8000/api/payments/candidate/payments/?candidate=${this.candidateId}`\r\n      ),\r\n    ]);\r\n    this.candidate = candidateRes.data;\r\n    this.payments = Array.isArray(paymentsRes.data)\r\n      ? paymentsRes.data\r\n      : paymentsRes.data.results || [];\r\n  } catch (e) {\r\n    console.error(\"Error loading dashboard:\", e);\r\n  } finally {\r\n    this.loading = false;\r\n  }\r\n },\r\n  },\r\n  mounted() {\r\n    this.fetchDashboard();\r\n\r\n    // ðŸ” Auto-refresh every 30 seconds\r\n    this.refreshInterval = setInterval(() => {\r\n      this.fetchDashboard();\r\n    }, 30000);\r\n  },\r\n  beforeUnmount() {\r\n    if (this.refreshInterval) clearInterval(this.refreshInterval);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.badge {\r\n  font-size: 1rem;\r\n}\r\n</style>\r\n","import { render } from \"./CandidateDashboard.vue?vue&type=template&id=5151a619&scoped=true\"\nimport script from \"./CandidateDashboard.vue?vue&type=script&lang=js\"\nexport * from \"./CandidateDashboard.vue?vue&type=script&lang=js\"\n\nimport \"./CandidateDashboard.vue?vue&type=style&index=0&id=5151a619&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5151a619\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","$data","loading","_hoisted_2","_cache","role","_hoisted_3","candidate","_hoisted_4","_toDisplayString","first_name","surname","gender","email","phone_country_code","phone_number","_hoisted_5","_hoisted_6","_normalizeClass","$options","statusBadgeClass","status","_hoisted_7","statusDescription","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","payments","length","_hoisted_12","_Fragment","_renderList","p","key","id","reference","amount","toLocaleString","statusClass","Date","created_at","_hoisted_13","name","props","candidateId","type","String","required","data","refreshInterval","PAID","ACCEPTED","REJECTED","NOT_PAID","methods","fetchDashboard","candidateRes","paymentsRes","Promise","all","axios","get","this","Array","isArray","results","e","console","error","mounted","setInterval","beforeUnmount","clearInterval","__exports__","render"],"sourceRoot":""}